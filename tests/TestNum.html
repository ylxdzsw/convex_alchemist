<template id="template-test-num">
    <ca-num type="tex"></ca-num>
    <br>
    <button>x10</button>
    <button>/10</button>
    <button>+1</button>
    <button>^2</button>
    <br>
    <button>a</button>
    <button>10</button>
    <button>e</button>
    <button>d</button>
    <button>ee</button>
</template>

<script>
    customElements.define('test-num', class extends HTMLElement {
        constructor() {
            super()
            const template = document.querySelector(`#template-${this.tagName.toLowerCase()}`)
            this.attachShadow({mode: 'open'}).append(template.content.cloneNode(true))
            customElements.upgrade(this)

            this.shadowRoot.querySelectorAll('button')[0].addEventListener('click', e => {
                this.exp = this.exp + Math.LN10
                this.render()
            })
            this.shadowRoot.querySelectorAll('button')[1].addEventListener('click', e => {
                this.exp = this.exp - Math.LN10
                this.render()
            })
            this.shadowRoot.querySelectorAll('button')[2].addEventListener('click', e => {
                if (this.exp < 100)
                    this.exp = Math.log1p(Math.exp(this.exp))
                this.render()
            })
            this.shadowRoot.querySelectorAll('button')[3].addEventListener('click', e => {
                this.exp = this.exp * 2
                this.render()
            })
            
            this.shadowRoot.querySelectorAll('button')[4].addEventListener('click', e => {
                game.config.number_format = game.config.number_format.fill('a')
            })
            this.shadowRoot.querySelectorAll('button')[5].addEventListener('click', e => {
                game.config.number_format = game.config.number_format.fill('10')
            })
            this.shadowRoot.querySelectorAll('button')[6].addEventListener('click', e => {
                game.config.number_format = game.config.number_format.fill('e')
            })
            this.shadowRoot.querySelectorAll('button')[7].addEventListener('click', e => {
                game.config.number_format = game.config.number_format.fill('d')
            })
            this.shadowRoot.querySelectorAll('button')[8].addEventListener('click', e => {
                game.config.number_format = game.config.number_format.fill('ee')
            })

            this.exp = 0
            this.render()
        }

        render() {
            this.shadowRoot.querySelector('ca-num').textContent = this.exp
        }
    })
</script>

