<template id="template-card">
    <style>
        :host {
            display: block;
            max-width: 625px;
            padding: 1rem 1rem;

            @media (max-width: 425px) {
                padding: 0 .8rem;
            }
        }
        h3 {
            margin: 2rem 0 1rem;
            position: relative;
            border-bottom: #bbb 1px solid;
        }
    </style>
    <h3><ca-text></ca-text></h3>
    <slot></slot>
</template>

<script>
    customElements.define('ca-card', class extends HTMLElement {
        constructor() {
            super()
            const template = document.querySelector(`#template-${this.tagName.slice(3).toLowerCase()}`)
            this.attachShadow({mode: 'open'}).append(template.content.cloneNode(true))
            customElements.upgrade(this)
        }

        connectedCallback() {
            for (const attr of this.attributes) if (attr.name.startsWith('data-title-'))
                this.shadowRoot.querySelector('ca-text').dataset[attr.name.slice(11)] = attr.value
            this.shadowRoot.querySelector('ca-text').render()
        }
    })
</script>

